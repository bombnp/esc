<div class="modal" [class.is-active]="active">
  <div class="modal-background" (click)="close()"></div>
  <div class="modal-card" style="max-width: 500px">
    <header class="modal-card-head">
      <p class="modal-card-title">จองห้องประชุม</p>
    </header>

    <section class="modal-card-body">
      <form [formGroup]="bookingform">
        <div class="field">
          <div class="control">
            <label for="หน่วยงาน" class="label">หน่วยงาน</label>
            <input formControlName="organization" type="text" class="input line-height-normal" placeholder="กวศ, ลานเกียร์, กรุป, ภาค.." />
          </div>
          <p class="help is-danger" name='organization'></p>
        </div>

        <div class="field">
          <div class="control">
            <label for="วัน" class="label">วัน</label>
            <div class="select is-fullwidth">
              <select formControlName="date" class="line-height-normal">
                <option *ngFor="let d of days$ | async; let i = index" [value]="d.unix()">
                  {{ d | date_format: "D MMMM YYYY (ddd)" }}
                  {{ i ? "" : "- วันนี้" }}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="field">
          <div class="control">
            <label for="ห้อง" class="label">ห้อง</label>
            <div class="select is-fullwidth">
              <select formControlName="room_id" class="line-height-normal" [value]='bookingform.controls.room_id.value'>
                <option *ngFor="let r of rooms$ | async" [value]="r.id">
                  {{ r.label }} (~{{ r.capacity }} คน)
                </option>
              </select>
            </div>
          </div>
          <p class="help is-danger" name='room_id'></p>
        </div>
        <div class="field">
          <app-map formControlName="room_id" [value]='bookingform.controls.room_id.value'></app-map>
        </div>
        <br>

        <div class="field is-grouped">
          <div class="control is-expanded">
            <label for="เริ่ม" class="label">เริ่ม</label>
            <div class="select is-fullwidth">
              <select formControlName="start">
                <option *ngFor="let d of times$ | async" [value]="d.unix()">{{ d | date_format: "HH:mm" }}</option>
              </select>
            </div>
            <p class="help is-danger" name='time_start'></p>
          </div>
          <div class="control is-expanded">
            <label for="จบ" class="label">จบ</label>
            <div class="select is-fullwidth">
              <select formControlName="end">
                <option *ngFor="let d of times$ | async" [value]="d.unix()">{{ d | date_format: "HH:mm" }}</option>
              </select>
            </div>
            <p class="help is-danger" name='time_end'></p>
          </div>
        </div>
      </form>
    </section>
    <footer class="modal-card-foot">
      <!-- [disabled]="!bookingform.valid" -->
      <button class="button is-success" (click)="onSubmit()">
        จองห้อง
      </button>
    </footer>
  </div>
</div>
